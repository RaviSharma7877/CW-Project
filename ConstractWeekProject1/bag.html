<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bag</title>
    <link rel="stylesheet" href="bag.css">
</head>
<header>
    <div id="Nav">
        <div class="container">
            <i class="fa-solid fa-bars"></i>
            <img src="logo.png" alt="">
            <form action="" class="searchbar">
                <input type="text" placeholder="What can we heip you find?" name="q" id="">
                <button type="submit"><img src="icons8-search-50.png" alt=""></button>
            </form>
            <div class="vl"></div>
            <a href="" class="reward">
                <ul>
                    <li>
                        <i class="fa-solid fa-plus"></i>
                <div>AD Rewards+</div>
                <div class="menu_bar">
                    <ul>
                        <li>No Rewards yet!!! please visit again</li>
                    </ul>
                </div>
                    </li>
                </ul>
            </a>
            <a href="./bag.html" class="reward">
                <ul>
                    <li>
                        <i class="fa-solid fa-dollar-sign"></i>
                <div>Coupons</div>
                <div class="menu_bar1">
                    <ul>
                        <li>AD-10(applicable ony more then amout of 1000)-click here to get</li>
                        
                    </ul>
                </div>
                    </li>
                </ul>
            </a>
            
            <div class="reward2">
            <ul>
                    <li>
                        <i class="fa-solid fa-user"></i>
                <div>My Account</div>
                <div class="menu_bar2">
                    <a href="profile.html">
                        <ul>
                            <li>Profile</li>
                            
                        </ul>
                        
                    </a>
                </div>
                    </li>
                </ul>
            </div>
            <div class="vl"></div>
            <a href="./bag.html">
                <span>0</span>
                <div>Bag</div>
            </a>
        </div>
    </div>
    <div id="Nav2">
        <div class="container2">
            <form action="" class="searchbar2">
                <input type="text" placeholder="What can we heip you find?" name="q" id="">
                <button type="submit"><img src="icons8-search-50.png" alt=""></button>
            </form>
            <div class="items">
                <ul>
                    <li>
                        <a href="./product1.html">Gift</a>
                    </li>
                    <li>
                        <a href="./product2.html">Women</a>
                    </li>
                    <li>
                        <a href="./product3.html">Men</a>
                    </li>
                    <li>
                        <a href="./product4.html">Kids</a>
                    </li>
                    <li>
                        <a href="./product5.html">Shoes</a>
                    </li>
                    <li>
                        <a href="./product6.html">Handbags</a>
                    </li>
                    <li>
                        <a href="./product7.html">Jewelry</a>
                    </li>
                    <li>
                        <a href="./product8.html">Beauty</a>
                    </li>
                    <li>
                        <a href="./products.html">Home</a>
                    </li>
                    <li>
                        <a href="./product9.html">Bed&Bath</a>
                    </li>
                    <li>
                        <a href="./eloproduct.html">Conn'sxAD</a>
                    </li>
                    <li>
                        <a href="./product10.html">Brands</a>
                    </li>
                    <li>
                        <a href="./product10.html">Clearance</a>
                    </li>
                </ul>
            </div>
            <div class="findstore">
                <i class="fa fa-briefcase" aria-hidden="true"></i>
                <ul>
                    
                    <li><a href="">Find A Store</a></li>
                </ul>
            </div>
        </div>
    </div>
    </header>
<body>
    <div id="container">
        
        <div class="cards"></div>
        <br>
        <form action="" id="coupan">
            <input type="text" placeholder="Apply coupan" id="coupandata">
            <input type="submit" value="Apply">
            <P id="displaycoupan"></P>
        </form>
        <br>
        <h1>amount</sub>:- <span id="total">0</span></h1>
        <h1>total <span class="gst">(with GST)</span> :- <span id="gst">0</span></h1><sub> 
            
    </div>
    
</body>
<script>
    let body1 = document.querySelector("#container")
    let countcart = document.querySelector("span")
    let body = document.querySelector(".cards")
    let spancount = document.querySelector(".spancount")
    let lowbtn = document.querySelector(".spancount")
    let highbtn = document.querySelector(".spancount")
    let total1 = document.querySelector("#total")
    let gst = document.querySelector("#gst")
    let coupan = document.getElementById("coupan")
    let coupandata = document.getElementById("coupandata")
    let displaycoupan = document.getElementById("displaycoupan")



    let cartarr = JSON.parse(localStorage.getItem("cart"))
if(cartarr===null){
    cartarr = []
}
countcart.innerText = cartarr.length



grandtotal(cartarr)
function grandtotal(data){
    let total=0
    data.forEach((element,index)=>{
        if(cartarr.length==0){
            total1.innerHTML = 0
        gst.innerHTML = 0
        }else{
        total += Number(element.price)
        total1.innerHTML = total
        gst.innerHTML = (total + (element.price*0.18)).toFixed(2)
        }
    })
    coupan.addEventListener("submit",(e)=>{
        e.preventDefault()
            if(total>=1000 && coupandata.value== "AD-10"){
                displaycoupan.innerHTML = "Coupan Applied"
                displaycoupan.style.color = "green"
                total1.innerHTML = total-(total*0.1)
                gst.innerHTML = ((total-(total*0.1)) + ((total-(total*0.1))*0.18)).toFixed(2)
        }else if(coupandata.value!== "AD-10"){
            coupandata.value = ""
            displaycoupan.innerHTML = "Check coupan"
                displaycoupan.style.color = "red"
        }else{
            coupandata.value = ""
            displaycoupan.innerHTML = "Add more items"
                displaycoupan.style.color = "red"
        }
        })
    
}
Display(cartarr)
function Display(data){
    body.innerHTML = ""
    data.forEach((element,index)=>{
        let i=0;
        let card = document.createElement("div")
        card.setAttribute("class","card")

        let img = document.createElement("img")
        img.setAttribute("src",element.img)

        let name = document.createElement("h2")
        name.innerText = element.name

        let category = document.createElement("h5")
        category.innerText  =element.category

        let description  = document.createElement("p")
        description.innerText = element.descriptions

        let price  =document.createElement("p")
        price.innerText = element.price

        let btn = document.createElement("button")
        btn.innerText = "Remove"
        btn.style.backgroundColor = "red"
        btn.style.border = "none"
        btn.style.color = "white"
        btn.addEventListener("click",()=>{
            cartarr = cartarr.filter((el,i)=>{
                if(index===i){
                    return false
                }else{
                    return true
                }
            })
            localStorage.setItem("cart",JSON.stringify(cartarr))
            Display(cartarr)
            
            if(cartarr.length==0){
            total1.innerHTML = 0
        gst.innerHTML = 0
        }else{
            grandtotal(cartarr)
        }
                countcart.innerText = cartarr.length
                
        })

        let subtotal = document.createElement("p")
        subtotal.innerText = "0"


        card.append(img, name, category, description, price, btn)
        body.append(card)
    })
}
</script>
</html>